<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GPU Price Hub – Weekly GPU Deals & Amazon Price Checks</title>

  <meta name="description"
        content="GPU Price Hub highlights GPUs worth checking on Amazon. Weekly updates on NVIDIA and AMD graphics cards.">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/styles.css">
</head>

<body>

<header class="top">
  <div class="container">
    <h1>GPU Price Hub</h1>
    <p class="subtitle">
      Discover which GPUs are worth checking on Amazon — updated weekly.
    </p>
  </div>
</header>

<main class="container">

  <!-- THIS WEEK -->
  <section class="section" id="weekly-deals">
    <div class="section-header">
      <h2>This Week’s GPU Deals</h2>
      <span class="updated" id="updated-label">Updated —</span>
    </div>

    <div class="grid" id="deals-grid">
      <p class="meta">Loading deals…</p>
    </div>
  </section>

  <!-- BROWSE GPUS -->
  <section class="section">
    <div class="section-header">
      <h2>Browse GPUs</h2>
    </div>

  <div class="grid">

    <div class="product-card">
      <h3>NVIDIA GPUs</h3>
      <ul class="meta">
        <li><a href="site/rtx-5080.html">RTX 5080</a></li>
        <li><a href="site/rtx-5070.html">RTX 5070</a></li>
        <li><a href="site/rtx-5070-ti.html">RTX 5070 Ti</a></li>
        <li><a href="site/rtx-5060.html">RTX 5060</a></li>
        <li><a href="site/rtx-5060-ti.html">RTX 5060 Ti</a></li>
      </ul>
    </div>

    <div class="product-card">
      <h3>AMD GPUs</h3>
      <ul class="meta">
        <li><a href="site/rx-9070-xt.html">RX 9070 XT</a></li>
        <li><a href="site/rx-9060-xt.html">RX 9060 XT</a></li>
      </ul>
    </div>

  </div>
  </section>

  <!-- WEEKLY ARCHIVE -->
  <section class="section section-archive">
    <div class="section-header">
      <h2>Weekly Updates</h2>
    </div>

    <ul class="week-archive">
      <li>
        <a href="site/week-2026-03.html">
          <span class="week-title">Week 03, 2026</span>
          <span class="week-label">GPU Price Watch</span>
        </a>
      </li>
    </ul>
  </section>

</main>

<footer class="footer">
  <p>As an Amazon Associate I earn from qualifying purchases.</p>
  <nav class="footer-links">
    <a href="about.html">About</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="disclosure.html">Affiliate Disclosure</a>
  </nav>
</footer>

<!-- ================= DATA ================= -->
<script src="js/data.js?v=20260115_1439"></script>

<!-- ================= RENDER ================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {

  /* =====================================================
     AMAZON AFFILIATE CONFIG
     ===================================================== */

  const AMAZON_AFFILIATE_TAG = "gpupricehub20-20";

  function withAffiliateTag(url) {
    try {
      const u = new URL(url);
      if (!u.searchParams.has("tag")) {
        u.searchParams.set("tag", AMAZON_AFFILIATE_TAG);
      }
      return u.toString();
    } catch (e) {
      return url; // fallback safety
    }
  }

  /* =====================================================
     DOM REFERENCES
     ===================================================== */

  const grid = document.getElementById("deals-grid");
  const updatedLabel = document.getElementById("updated-label");

  /* =====================================================
     DATA GUARD
     ===================================================== */

  if (typeof DATA === "undefined") {
    updatedLabel.textContent = "Updated recently";
    grid.innerHTML = "<p class='meta'>Data not loaded.</p>";
    return;
  }

  /* =====================================================
     TIMESTAMP
     ===================================================== */

  updatedLabel.textContent =
    "Updated " + new Date(DATA.generatedAt).toLocaleDateString();

  /* =====================================================
     NO DEALS
     ===================================================== */

  if (DATA.count === 0) {
    grid.innerHTML =
      "<p class='meta'>No notable GPU price drops this week.</p>";
    return;
  }

  /* =====================================================
     RENDER DEAL CARDS
     ===================================================== */

  grid.innerHTML = "";

  DATA.products.forEach(p => {
    const card = document.createElement("div");
    card.className = "product-card";

    const affiliateLink = withAffiliateTag(p.link);

    card.innerHTML = `
      <div class="product-image">
        <img src="${p.image}" alt="${p.name}" loading="lazy">
      </div>

      <h3>${p.name}</h3>

      <div class="price-row">
        <span class="old">$${p.oldPrice}</span>
        <span class="new">$${p.newPrice}</span>
        <span class="drop">-${p.dropPct}%</span>
      </div>

      <p class="meta">
        Price drop detected · Last checked ${p.updated}
      </p>

      <a class="button"
         href="${affiliateLink}"
         target="_blank"
         rel="nofollow sponsored noopener">
        Check current price
      </a>
    `;

    grid.appendChild(card);
  });

});
</script>

</body>
</html>
